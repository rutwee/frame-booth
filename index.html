<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Frame App</title>
  
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Manrope:wght@400;500;600;700&family=Rethink+Sans:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/konva@9/konva.min.js"></script>
</head>

<body>

  <header class="top-bar">
    <div class="top-bar-content">
      <div class="top-actions" aria-label="history actions">
        <button id="undoBtn" class="top-icon-btn" title="Undo (Ctrl/Cmd+Z)">
          <img src="icons/undo_icon.svg" alt="Undo">
        </button>
        <button id="redoBtn" class="top-icon-btn" title="Redo (Ctrl/Cmd+Shift+Z)">
          <img src="icons/redo_icon.svg" alt="Redo">
        </button>
        <button id="resetBtn" class="top-icon-btn" title="Reset scene">
          <img src="icons/refresh_icon.svg" alt="Reset">
        </button>
        <button id="toolbarToggleBtn" class="top-icon-btn toolbar-toggle-btn" title="Toggle controls" aria-controls="toolbarPanel" aria-expanded="false">
          <img src="icons/menu_icon.svg" alt="Toggle Controls">
        </button>
      </div>
      <div class="app-title-wrapper"> 
      <img src="icons/framebooth_icon.svg" alt="Frame Booth Logo" class="app-logo">
      <h1 class="app-title">Frame Booth</h1>
    </div>
    </div>
  </header>

  <main class="preview-wrap">
    <canvas id="myCanvas"></canvas> <div id="mockupArea">
      </div>
  </main>

  <aside id="toolbarPanel" class="toolbar" role="toolbar" aria-label="controls">
    
    <div class="toolbar-group">
      <label>Screenshot</label>
      <input type="file" id="fileInput" accept="image/*" hidden>
      
      <div class="button-row">
        <button id="uploadBtn" class="btn accent-green" title="Upload a screenshot (PNG, JPG) (Max 8MB)">
          <img src="icons/add_screenshot_icon.svg" alt="Add Screenshot">
          <span>Add</span>
        </button>

        <button id="deleteBtn" class="btn accent-red" disabled title="Delete the currently selected screenshot/frame">
          <img src="icons/delete_icon_2.svg" alt="Delete">
          <span>Delete</span>
        </button>
      </div>
    </div>

    <div class="divider"></div>

    <div class="toolbar-group">
      <label for="frameSelect">Device Frame</label>
      <div class="select-wrapper">
        <select id="frameSelect"></select>
      </div>

      <div class="button-row stacked">
        <button id="addFrameBtn" class="btn accent-orange" title="Add the selected device frame to the canvas">
          <img src="icons/add_frame_icon.svg" alt="Add Frame">
          <span>Add Frame</span>
        </button>

        <button id="updateFrameBtn" class="btn accent-orange" disabled title="Replace the selected frame with the one from the dropdown">
          <img src="icons/update_frame_icon.svg" alt="Update Frame">
          <span>Update Frame</span>
        </button>
      </div>
    </div>

    <div class="divider"></div>

    <div class="toolbar-group">
      <label>Canvas Settings</label>
      <div class="canvas-toggle-row">
        <input type="checkbox" id="canvasEnabled">
        <label for="canvasEnabled">Enable Canvas</label>
      </div>
      <div id="canvasSettingsPanel" class="canvas-settings-panel">
        <div class="input-row">
          <div class="input-group small">
            <label for="docWidth">Width</label>
            <input type="number" id="docWidth" min="200" value="900">
          </div>
          <div class="input-group small">
            <label for="docHeight">Height</label>
            <input type="number" id="docHeight" min="400" value="600">
          </div>
        </div>
        <div class="input-group color-group">
          <label for="bgColor">BG Color</label>
          <div class="canvas-color-controls">
            <div class="select-wrapper gradient-select-wrapper">
              <select id="bgGradient" title="Canvas gradient"></select>
            </div>
            <div class="color-picker-wrapper">
              <input type="color" id="bgColor" value="#ffffff">
            </div>
          </div>
        </div>
        <div id="gradientCustomPanel" class="gradient-custom-panel is-disabled">
          <div id="gradientEditor" class="gradient-editor" title="Click to add gradient stops">
            <div id="gradientBar" class="gradient-bar"></div>
            <div id="gradientStopsLayer" class="gradient-stops-layer"></div>
          </div>
          <div class="gradient-controls-row">
            <label for="gradientAngle">Angle</label>
            <input type="range" id="gradientAngle" min="0" max="360" value="135" title="Gradient angle">
            <span id="gradientAngleValue" class="gradient-angle-value">135deg</span>
          </div>
          <input type="color" id="gradientStopColor" class="gradient-stop-color-input" value="#8ec5ff">
          <input type="hidden" id="customGradientData" value='{"angle":135,"stops":[{"id":"gs-1","position":0,"color":"#e0f7ff"},{"id":"gs-2","position":1,"color":"#8ec5ff"}]}'>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="toolbar-group">
      <label>Export</label>

      <button id="downloadFrameBtn" class="btn accent-blue" disabled title="Export only the selected frame as a PNG">
        <img src="icons/download_frame_icon.svg" alt="Download Frame">
        <span>Download Frame</span>
      </button>

      <button id="downloadBtn" class="btn accent-blue" title="Export the entire scene as a high-quality PNG">
        <img src="icons/download_scene_icon.svg" alt="Download Scene">
        <span>Download Scene</span>
      </button>
    </div>

  </aside>
  <div id="toolbarBackdrop" class="toolbar-backdrop" hidden></div>

  <div class="corner-links" aria-label="quick links">
    <a id="contactLink" class="corner-icon-btn" href="mailto:framebooth.ca@gmail.com" title="Contact">
      <img src="icons/email_icon_2.svg" alt="Contact">
    </a>
    <a id="donateLink" class="corner-icon-btn" href="https://buymeacoffee.com/rutwee" target="_blank" rel="noopener noreferrer" title="Buy me a coffee">
      <img src="icons/buymeacoffee_icon.svg" alt="Buy Me a Coffee">
    </a>
  </div>

  <nav class="legal-links" aria-label="legal links">
    <a href="privacy.html" target="_blank" rel="noopener noreferrer">Privacy</a>
    <a href="terms.html" target="_blank" rel="noopener noreferrer">Terms</a>
    <a href="disclaimer.html" target="_blank" rel="noopener noreferrer">Disclaimer</a>
  </nav>

  <script type="module" src="js/main.js"></script>

</body>
</html>
